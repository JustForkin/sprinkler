!function(t,n){"use strict";"function"==typeof define&&define.amd?define(["exports"],n):n("object"==typeof exports?exports:t.Sprinkler={})}(this,function(t){"use strict";var n=function(t,n){var i,e,h,r,d;for(h=t.length,e=[],d=0,r=function(){d+=1;var t=d===h;t&&n(null,e)},i=0;i<t.length;i+=1)e.push(new Image),e[i].onload=r,e[i].src=t[i]},i=function(t,n){var i=n-t;return t+i*Math.random()},e=function(t){var n=0,e=t.length,h=i(n,e),r=Math.floor(h),d=r;return t[d]},h=function(t){var n,i,e,h;n=Math.exp(-t),i=0,e=1;do i+=1,h=Math.random(),e*=h;while(e>n);return i-1},r=function(t){var n=function(){t.width=window.innerWidth,t.height=window.innerHeight};window.addEventListener("resize",n,!1),n()},d=function(t,n,i,e,h,r,d,o,a,s,u,c,f,l,g,m,p,w){this.x=t,this.y=n,this.z=i,this.r=e,this.a=h,this.dx=r,this.dy=d,this.dz=o,this.dr=a,this.da=s,this.ddx=u,this.ddy=c,this.ddz=f,this.ddr=l,this.dda=g,this.img=m,this.w=p,this.h=w};d.prototype.tick=function(t){this.x+=this.dx*t,this.y+=this.dy*t,this.z+=this.dz*t,this.r+=this.dr*t,this.a+=Math.min(1,Math.max(0,this.a+this.da*t)),this.dx+=this.ddx*t,this.dy+=this.ddy*t,this.dz+=this.ddz*t,this.dr+=this.ddr*t,this.da+=this.dda*t};var o=function(t,o){var a=[],s=[],u=!1,c=null,f=t.getContext("2d");r(t);var l={ddr:0,imagesInSecond:16};"undefined"==typeof o&&(o=l),o.hasOwnProperty("ddr")||(o.ddr=l.ddr),"number"!=typeof o.ddr&&(o.ddr=l.ddr),o.hasOwnProperty("imagesInSecond")||(o.imagesInSecond=l.imagesInSecond),"number"!=typeof o.imagesInSecond&&(o.imagesInSecond=l.imagesInSecond);var g=function(){var n,h,r;return n=t.width,h=t.height,r=e(a),new d(i(0,n),-Math.max(r.width,r.height)/2,i(.38,.62),2*Math.PI*i(0,1),1,i(-1,1),i(70,100),0,i(-.5,.5),0,0,5,0,o.ddr,0,r,r.width,r.height)},m=function(n){var i,e,r,d,a;for(i=0;i<s.length;i+=1)s[i].tick(n);var u=o.imagesInSecond,c=n*u,f=h(c);for(i=0;f>i;i+=1)s.push(g());for(e=t.height,r=[],i=0;i<s.length;i+=1)a=Math.max(s[i].w,s[i].h)/2,d=s[i].y<e+a,d&&r.push(s[i]);s=r},p=function(){var n,i,e;for(f.clearRect(0,0,t.width,t.height),n=0;n<s.length;n+=1)f.globalAlpha=s[n].a,i=s[n].z*s[n].w,e=s[n].z*s[n].h,f.translate(s[n].x,s[n].y),f.rotate(s[n].r),f.drawImage(s[n].img,-Math.floor(i/2),-Math.floor(e/2),i,e),f.setTransform(1,0,0,1,0,0),f.globalAlpha=1},w=function x(){var t,n;t=Date.now(),n=null===c?0:t-c,c=t,m(n/1e3),p(),u&&window.requestAnimationFrame(x)},v=function(){u||(u=!0,w())},y=function(){u=!1};this.load=function(t,i){n(t,function(t,n){return t?void console.error(t):([].push.apply(a,n),void i(v,y))})}};t.create=function(t,n){return new o(t,n)},t.extension=o.prototype,t.version="0.1.0"});
//# sourceMappingURL=sprinkler.min.js.map